提示词：创建"星汉·拟真流体"天气海报 (V6 - 增强版)

核心目标：
创建一个**“新中式 (Neo-Chinese)”风格的、具有“电影级高拟真”**物理特效的、全响应式单页网页应用。项目代号：“星汉·拟真重制版”。

技术栈 (强制)：

HTML (单文件结构)

Tailwind CSS (用于UI布局)

Three.js (用于3D场景)

GLSL (自定义着色器) (用于所有粒子物理模拟)

1. 核心技术架构 (双引擎渲染)

你必须使用一个**“双引擎”**渲染架构来区分不同形态的粒子：

引擎一：通用粒子系统 (Particle Engine)

技术： THREE.Points + ShaderMaterial (GLSL)。

用途： 负责渲染“点状”粒子，包括 (模式0) 晴空、(模式2) 飞雪 和 (模式3) 狂风。

粒子数： 必须“克制”，保持在 6000 - 8000 颗，以保证画面通透。

Shader 属性 (Attributes)： 必须包含 size (大小), speed (速度因子), randomVal (随机种子)。

引擎二：雨水系统 (Rain Engine)

技术： THREE.InstancedMesh + ShaderMaterial (GLSL)。

用途： 仅用于 (模式1) 雨天。

几何体 (Geometry)： THREE.PlaneGeometry (一个细长的平面，而不是一个点)。

Shader 属性 (Attributes)： 必须包含 instancePos, instanceSpeed, instanceHeight (用于控制雨丝长度)。

粒子数： 1000 - 2000 条雨丝。

2. 物理模拟与视觉特效 (四种模式)

这是项目的核心，必须严格按以下物理模型实现：

模式 0：晴空 (Stars)

引擎： 引擎一 (Points)。

物理：

位置固定： 星星不许移动或流动。

脉冲闪烁 (Twinkle)： 在 Vertex Shader (顶点着色器) 中，使用 sin(uTime * 2.0 + randomVal * 10.0) 来驱动 vAlpha，模拟大气扰动带来的真实闪烁。

流星 (Meteors)： 必须创建一个独立的流星系统 (例如，通过 THREE.Line 或一个小型专用粒子系统)，按低概率 (如 5%) 随机生成划过屏幕的流星线。

交互： 鼠标只产生极其微弱的“视差”效果 (Parallax)，不许推开星星。

模式 1：雨夜 (Rain)

引擎： 引擎二 (InstancedMesh)。

物理：

引擎一隐藏： 在此模式下，引擎一 (Points) 的 vAlpha 必须设为 0 或完全隐藏。

高速下落： 在 v-rain 着色器中，使用 mod(uTime * speed, 1200.0) 模拟高速循环下落。

倾斜： 必须通过 xDrift = -yDrop * 0.2 这样的计算，使雨丝始终保持倾斜。

交互： 鼠标必须产生“避雨”或“雨伞”效果，即鼠标附近的雨丝被向两侧推开 (Lean / Repel)。

模式 2：飞雪 (Snow)

引擎： 引擎一 (Points)。

物理：

空气动力学： 禁止使用简单的螺旋下落。

必须使用叠加的正弦波 (e.g., swayX + flutter) 来模拟雪花在空气中“飘荡”和“翻滚”的复杂运动。

速度差异： fallSpeed 必须由 speed 属性调节，模拟大雪花落得快，小雪花飘得慢。

交互： 鼠标必须产生强烈的“排斥” (Repel) 效果，仿佛一阵风吹开了雪花。

模式 3：狂风 (Wind)

引擎： 引擎一 (Points)。

物理：

风洞湍流： 模拟“风洞”效果。

高速平移： 粒子主体运动是高速水平移动 (xOffset = mod(uTime * windSpeed, 2000.0))。

剧烈抖动 (Turbulence)： 必须在 Y 轴上叠加高频 sin 抖动，模拟沙尘被卷起的感觉。

交互： 鼠标必须产生“漩涡” (Vortex) 效果。

3. UI/UX 与交互

风格： 新中式。UI 元素必须使用 backdrop-filter: blur(20px) 和 rgba(0,0,0,0.3) 创造深色磨砂玻璃质感。

字体： 必须使用 Noto Serif SC (衬线体) 和 Zhi Mang Xing (或马善政) (书法体)。

布局：

左上：地点（长安）- **可点击切换城市**。

左下：主天气信息（大号温度数字、图标）。

诗词 (核心)： 位于屏幕中右侧，桌面端必须竖排 (writing-mode: vertical-rl)，移动端自动切换为横排。使用"醉后不知天在水，满船清梦压星河"。**诗词两侧添加箭头按钮支持切换，底部显示圆点指示器**。

底部：一个圆角胶囊 (rounded-full) 形状的 Dock 栏，包含4个天气切换按钮。

交互逻辑：

平滑过渡： 切换天气时，uMode (GLSL) 和 uGlobalOpacity (Rain) 必须使用 requestAnimationFrame 进行平滑插值 (Lerp) 过渡，时长约 800ms。

UI 动画： 切换天气时，所有文本（温度、诗词）必须有"淡出 -> 更新内容 -> 淡入"的动画效果。

响应式： 必须完美适配移动端。

4. 增强功能 (V6 新增)

诗词切换系统：

数据结构： 使用二维数组 weatherPoems[天气模式][诗词索引]，每种天气包含 3 首诗词。

交互方式： 诗词两侧显示半透明箭头按钮 (chevron-left / chevron-right)，点击切换。

指示器： 诗词下方显示圆点指示器，当前诗词显示为长条 (w-6)，其他为圆点 (w-2)。

动画效果： 切换时淡出 (opacity: 0 + blur(10px)) → 更新内容 → 淡入，时长 300ms。

自动重置： 切换天气模式时，诗词索引自动重置为第一首。

诗词库内容：

晴空 (3首)：
- 醉后不知天在水 / 满船清梦压星河
- 天阶夜色凉如水 / 坐看牵牛织女星
- 迢迢牵牛星 / 皎皎河汉女

雨夜 (3首)：
- 君问归期未有期 / 巴山夜雨涨秋池
- 夜阑卧听风吹雨 / 铁马冰河入梦来
- 春雨断桥人不度 / 小舟撑出柳阴来

飞雪 (3首)：
- 柴门闻犬吠 / 风雪夜归人
- 千里黄云白日曛 / 北风吹雁雪纷纷
- 窗含西岭千秋雪 / 门泊东吴万里船

狂风 (3首)：
- 大风起兮云飞扬 / 威加海内兮归故乡
- 长风破浪会有时 / 直挂云帆济沧海
- 八月秋高风怒号 / 卷我屋上三重茅

地点切换系统：

城市数据： 使用数组 locations[] 包含 5 个中国古都：长安、洛阳、金陵、姑苏、临安。

数据结构： 每个城市包含：
- zh (中文名): 如"长安"
- en (英文名): 如"CHANG'AN"
- lunar (农历日期): 如"上元 · 夜"
- temp (基准温度): 如 18

交互方式： 点击左上角城市名称区域，循环切换城市。

视觉反馈： 悬浮时显示刷新图标 (refresh-cw) + 标题微放大效果。

温度联动： 温度根据城市基准 + 天气偏移计算：
- 晴空: baseTemp
- 雨夜: baseTemp - 3
- 飞雪: baseTemp - 23
- 狂风: baseTemp - 9

动画效果： 城市名、农历日期、温度同步淡出淡入，时长 300ms。

5. 技术实现要点

状态管理： 使用三个全局变量跟踪状态：
- currentPoemIndex (当前诗词索引)
- currentLocationIndex (当前城市索引)
- currentWeatherMode (当前天气模式)

数据驱动： 所有内容从数据数组读取，便于扩展和维护。

循环索引： 使用取模运算 (index + direction + length) % length 实现无限循环。

动画协调： 诗词切换 (300ms) 和天气切换 (800ms) 使用不同时长以区分交互层级。

指示器动态生成： 根据当前天气模式的诗词数量动态生成指示器。